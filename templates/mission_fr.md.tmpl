# Mission — Règles d'engagement

Ce fichier définit les règles d'engagement de l'Expédition.
Tous les Expéditionnaires doivent lire ce fichier et accomplir leur mission.

---

## Acquisition de la mission

1. Utiliser Linear pour récupérer les issues non terminées (tous les statuts sauf Done — y compris les issues bloquées en Testing ou In Review des Expéditions précédentes)
2. Si un **Gradient Gauge** est fourni, l'utiliser comme indicateur du niveau de complexité à entreprendre ; sinon, choisir une issue appropriée selon votre propre jugement

## Évaluation de la mission

Analyser le contenu de l'issue et la classer dans l'un des trois types suivants :

### implement (implémentation)

Implémentation de code, ajout de fonctionnalités, refactoring, etc.

### verify (vérification)

Tests E2E, revue UI, complétion de checklist, vérification de comportement, etc.
Critères : la description contient des mots-clés comme « test », « vérifier », « contrôle », « QA », « E2E »,
ou inclut une checklist (`- [ ]`).

### fix (correction)

Lorsque des défauts sont découverts pendant verify, vous passez à fix au sein de la même Expédition. Ce n'est pas une sélection séparée — cela découle naturellement des résultats de verify.

---

## Procédure implement

1. `git checkout <base-branch> && git pull origin <base-branch>`
2. Mettre à jour l'issue vers un statut de travail en cours dans Linear (ex. « In Progress »)
3. Créer la branche : `feat/<issue-id>-<description-courte>`
4. TDD : écrire les tests -> implémenter -> faire passer les tests
5. Commits fréquents (inclure l'ID de l'issue dans les messages de commit)
6. Vérification lint / format
7. Si l'échec persiste après 3 tentatives de correction -> ignorer (consigner la leçon dans le journal)
8. Créer la PR via GitHub (corps incluant `Closes <issue-id>`)
9. Mettre à jour l'issue vers un statut de revue dans Linear (ex. « In Review »)
10. La revue de code est gérée par l'orchestrateur (Paintress) après la création de la PR — ne pas exécuter de commandes de revue vous-même

## Procédure verify

1. Mettre à jour l'issue vers un statut de test/QA dans Linear (ex. « Testing ») si ce n'est pas déjà le cas
2. Vérifier que le serveur dev est en cours d'exécution (accès à l'URL)
3. Si des outils d'automatisation de navigateur sont disponibles (Playwright, Chrome DevTools, etc.), les utiliser pour ouvrir un navigateur et naviguer vers la page cible
4. Exécuter les éléments de la checklist **un par un** :
   a. Interagir avec l'UI
   b. Comparer les résultats attendus et réels
   c. Capture d'écran si l'automatisation du navigateur est disponible
   d. Enregistrer le résultat (Pass / Fail + détails)
5. Créer un rapport QA et commenter l'issue via Linear
6. **Aucun défaut** : mettre à jour l'issue vers un statut complété dans Linear (ex. « Done »)
7. **Défauts trouvés** : -> transition vers fix

## Procédure fix (transition automatique depuis verify)

Pour chaque défaut :

1. Créer une issue bug via Linear
2. `git checkout <base-branch> && git pull origin <base-branch>`
3. Mettre à jour l'issue bug vers un statut de travail en cours dans Linear (ex. « In Progress »)
4. Branche : `fix/<bug-issue-id>-<description-courte>`
5. Implémenter la correction et écrire les tests
6. Si l'échec persiste après 3 tentatives de correction -> ignorer (consigner la leçon dans le journal)
7. Créer la PR via GitHub (corps incluant `Closes <bug-issue-id>`)
8. Mettre à jour l'issue bug vers un statut de revue dans Linear (ex. « In Review »)
9. La revue de code est gérée par l'orchestrateur (Paintress) après la création de la PR — ne pas exécuter de commandes de revue vous-même

---

## Interdictions

- Ne pas faire de force push
- Ne pas commiter directement sur la branche de base
- Ne pas créer de PR avec des tests en échec
- Ne pas arrêter le serveur dev (géré par un processus externe)
- Ne pas re-vérifier les corrections au sein de la même Expédition — laisser la vérification à la prochaine Expédition

## Gestion de l'ambiguïté

- Exécuter les éléments ambigus selon le meilleur jugement et consigner le raisonnement dans le journal
- Ignorer les issues aux spécifications floues et les consigner dans le journal
- En cas de doute, ignorer et laisser à la prochaine Expédition
